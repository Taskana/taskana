<div class="classification-list">

	<!-- ACTION TOOLBAR -->
  <section class="classification-list__action-toolbar">
    <button mat-flat-button color="primary" (click)="addClassification()">
      <mat-icon>add</mat-icon>
    </button>

    <taskana-administration-import-export
      class="classification-list__import-export" [currentSelection]="taskanaType.CLASSIFICATIONS">
    </taskana-administration-import-export>

    <button mat-flat-button>
      <taskana-administration-classification-types-selector
        class="pull-right">
      </taskana-administration-classification-types-selector>
    </button>
  </section>


	<!-- FILTER -->
  <div class="classification-list__filter">
    <div class="filter__category-filter">
      <button mat-icon-button [matMenuTriggerFor]="menu">
        <svg-icon class="categories" [src]="(getCategoryIcon(selectedCategory) | async)?.name" [title]="(getCategoryIcon(selectedCategory) | async)?.text"></svg-icon>
      </button>

      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="selectCategory('')" >
          <svg-icon class="categories pr-2" src="./assets/icons/asterisk.svg" [title]="(getCategoryIcon('all') | async)?.text"></svg-icon>
          <span>All</span>
        </button>
        <button mat-menu-item *ngFor="let category of categories$ | async" (click)="selectCategory(category)">
          <svg-icon class="categories pr-2" [src]="(getCategoryIcon(category) | async)?.name" [title]="(getCategoryIcon(category) | async)?.text"></svg-icon>
          <span> {{category}} </span>
        </button>
      </mat-menu>
    </div>

    <div class="filter__input">
      <mat-form-field floatLabel="never" class="filter__input-field">
        <mat-label>Filter classification</mat-label>
        <input matInput [ngModel]="inputValue" (ngModelChange)="inputValue = $event">
      </mat-form-field>
    </div>
  </div>

	<div class="horizontal-bottom-divider"></div>

	<!-- CLASSIFICATION TREE -->
	<taskana-shared-spinner [isRunning]="requestInProgress" positionClass="centered-spinner-whole-screen"></taskana-shared-spinner>
	<taskana-administration-tree *ngIf="(classifications && classifications.length) else empty_classifications"
                                 [filterText]="inputValue" [filterIcon]="selectedCategory" (switchTaskanaSpinnerEmit)="requestInProgress=$event"></taskana-administration-tree>
	<ng-template #empty_classifications>
		<div *ngIf="!requestInProgress" class="container-no-items center-block no-classifications">
			<h3 class="grey">There are no classifications</h3>
			<svg-icon class="img-responsive empty-icon" src="./assets/icons/classification-empty.svg"></svg-icon>
		</div>
	</ng-template>
</div>
